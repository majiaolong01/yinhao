(this["webpackJsonpwebsocket-test"]=this["webpackJsonpwebsocket-test"]||[]).push([[9],{448:function(e,t,n){"use strict";n(447);var r=n(449),a=n.n(r),o=n(478),c=n.n(o);c.a.defaults.withCredentials=!0,c.a.interceptors.request.use((function(e){var t=sessionStorage.getItem("accessToken");return t&&(e.headers.common.access_token=t),e}),(function(e){return Promise.reject(e)})),c.a.interceptors.response.use((function(e){return 401===e.data.code&&a.a.error(e.data.message,2,(function(){window.location.replace("/")})),e.data}),(function(e){return Promise.reject(e)})),t.a={getPublicKey:function(){return c.a.get("/api/admin-server/publicKey")},login:function(e){return c.a.post("/api/admin-server/login",e)},getAllProduct:function(e){return c.a.post("/api/admin-server/product/allproduct",e)},upload:function(e){return c.a.post("/api/admin-server/product/upload",e)},updateProduct:function(e){return c.a.post("/api/admin-server/product/update",e)},download:function(e){return c.a.post("/api/admin-server/product/download",e,{responseType:"blob"})}}},631:function(e,t,n){},826:function(e,t,n){"use strict";n.r(t);n(454);var r,a=n(468),o=n.n(a),c=(n(477),n(493)),s=n.n(c),i=(n(447),n(449)),u=n.n(i),p=n(131),l=n(126),d=n(127),m=n(130),b=n(128),f=n(129),g=n(1),y=n.n(g),h=n(132),v=n(564),O=n(448);n(631);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=Object(h.b)((function(e){return e.user}))(r=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(b.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(p.a)({},e.target.name,e.target.value))},n.login=function(){var e=n.state,t=e.username,r=e.password,a=new v.JSEncrypt;a.setPublicKey(n.state.publicKey);var o={username:t,password:a.encrypt(r)};O.a.login(o).then((function(e){if(200===e.code){u.a.success(e.message);var t=n.props.dispatch;window.sessionStorage.setItem("accessToken",e.accessToken),t({type:"LOGIN",payload:j({},e.data,{accessToken:e.accessToken})}),n.props.history.push({pathname:"/product"})}else u.a.error(e.message)}))},n.getPublicKey=function(){O.a.getPublicKey().then((function(e){200===e.code&&n.setState({publicKey:e.data.publicKeyStr})}))},n.state={username:"",password:"",publicKey:""},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPublicKey()}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password;return y.a.createElement("div",{className:"container"},y.a.createElement("div",{className:"login-box"},y.a.createElement("div",{className:"item"},y.a.createElement(s.a,{size:"large",value:n,name:"username",onChange:function(t){return e.handleChange(t)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}),y.a.createElement("br",null)),y.a.createElement("div",{className:"item"},y.a.createElement(s.a,{size:"large",value:r,name:"password",type:"password",onChange:function(t){return e.handleChange(t)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),y.a.createElement(o.a,{type:"primary",size:"large",block:!0,onClick:function(){return e.login()}},"\u63d0\u4ea4")))}}]),t}(g.Component))||r;t.default=P}}]);
//# sourceMappingURL=9.1f2e6d60.chunk.js.map